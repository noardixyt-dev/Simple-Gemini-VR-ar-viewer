<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Noardix Stereo AR V5</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        #ui-overlay {
            position: fixed; top: 10px; left: 10px; z-index: 9999;
            background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px;
        }
        .buttons { margin-top: 10px; }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">

    <div id="ui-overlay">
        <strong>NOARDIX VR-AR</strong><br>
        <input type="file" id="file-input" accept=".glb" style="display:none">
        <button onclick="document.getElementById('file-input').click()">üìÅ IMPORT GLB</button>
        <p style="font-size: 10px;">1. Point at Hiro Marker<br>2. Tap VR Icon (Bottom Right)</p>
    </div>

    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: true">
        
        <a-assets id="asset-holder"></a-assets>

        <a-marker preset="hiro" id="marker">
            <a-entity id="model-container" rotation="0 0 0">
                <a-box id="placeholder" position="0 0.5 0" material="color: #00e5ff; opacity: 0.8;"></a-box>
            </a-entity>
        </a-marker>

        <a-entity camera look-controls wasd-controls></a-entity>
        
    </a-scene>

    <script>
        const fileInput = document.getElementById('file-input');
        const modelContainer = document.getElementById('model-container');
        const placeholder = document.getElementById('placeholder');

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const url = URL.createObjectURL(file);
            
            // Remove the placeholder box
            if (placeholder) placeholder.remove();

            // Create new GLTF entity
            const newModel = document.createElement('a-entity');
            newModel.setAttribute('gltf-model', url);
            newModel.setAttribute('scale', '0.5 0.5 0.5'); // Adjust scale as needed
            newModel.setAttribute('position', '0 0 0');
            
            // Clear previous models and add new one
            modelContainer.innerHTML = '';
            modelContainer.appendChild(newModel);
        });

        // Trigger Auto-Focus/Brightness: This is handled by the browser's 
        // MediaStream implementation via AR.js automatically.
    </script>
</body>
</html>

